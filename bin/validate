#!/bin/sh

set -eu

while :; do
  while getopts ":e:" arg; do
    case $arg in
      e) 
        enc_auth_file="$OPTARG"
        ;;
      *)
        echo Ignoring unknown option: $OPTARG
        ;;
    esac
  done
  OPTIND=$((OPTIND+1))
  [ $OPTIND -gt $# ] && break
done

# Decrypt Auth URL File
# openssl enc -d -aes-256-cbc -in $enc_auth_file -out auth_url.txt -k $AUTH_FILE_KEY

# Authenticate DevHub Org
# sfdx force:auth:sfdxurl:store -f auth_url.txt -d -a TargetOrg && rm auth_url.txt

# Run validation deployment
# sfdx force:source:deploy -c -p force-app -u TargetOrg -l RunLocalTests -w -1

echo "validate"
echo "${enc_auth_file}"